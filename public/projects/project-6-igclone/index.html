<!DOCTYPE html>
<html lang="en">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Social Media App Clone | Jason Gabunilas</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="A SQL relational database exercise">
    <meta name="generator" content="Hugo 0.135.0">
    
    
    
      <meta name="robots" content="noindex, nofollow">
    
    

    
<link rel="stylesheet" href="/ananke/css/main.min.css" >



    

    
      

    

    

    
      <link rel="canonical" href="http://localhost:1313/projects/project-6-igclone/">
    

    <meta property="og:url" content="http://localhost:1313/projects/project-6-igclone/">
  <meta property="og:site_name" content="Jason Gabunilas">
  <meta property="og:title" content="Social Media App Clone">
  <meta property="og:description" content="A SQL relational database exercise">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="projects">

  <meta itemprop="name" content="Social Media App Clone">
  <meta itemprop="description" content="A SQL relational database exercise">
  <meta itemprop="wordCount" content="1667">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Social Media App Clone">
  <meta name="twitter:description" content="A SQL relational database exercise">

	
  </head><body class="ma0 avenir bg-near-white development">

    
   
  

  
  
  
  <header class="cover bg-center" style="background-image: url('/projects/project-6-igclone/social-media.jpg');">
    <div class="bg-black-60">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        Jason Gabunilas
      
    </a>
    <div class="flex-l items-center">
      

      
        <ul class="pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/about/" title="About Me page">
              About Me
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/projects/" title="Projects page">
              Projects
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="hover-white no-underline white-90" href="/contact/" title="Contact page">
              Contact
            </a>
          </li>
          
        </ul>
      
      <div class="ananke-socials"></div>

    </div>
  </div>
</nav>

      <div class="tc-l pv6 ph3 ph4-ns">
        
          <div class="f2 f1-l fw2 white-90 mb0 lh-title">Social Media App Clone</div>
          
            <div class="fw1 f5 f3-l white-80 measure-wide-l center lh-copy mt3 mb4">
              A SQL relational database exercise
            </div>
          
        
      </div>
    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked ttu">
          
        Projects
      </aside><div id="sharing" class="mt3 ananke-socials"></div>
<h1 class="f1 athelas mt3 mb1">Social Media App Clone</h1>
      
      
      

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><p>A SQL relational database exercise</p>
<h4 id="view-project-files-in-githubhttpsgithubcomjgabunilasmysql_bootcamptreemainsection2014-1520-20instagram20database20clone"><a href="https://github.com/jgabunilas/mysql_bootcamp/tree/main/Section%2014-15%20-%20Instagram%20Database%20Clone">View project files in Github</a></h4>
<h2 id="introduction">Introduction</h2>
<p>In this project, we construct a relational database that is intended to mimic the basic functionality of a social media application. First, the database tables are defined, with key relationships established between them to enable the desired functionalities and enforce data integrity. Next, the tables are loaded with fictional data representing users, objects and actions for a typical social media site, including Likes, Comments, Photos, and Follows. Lastly, SQL commands are used to explore the data and uncover insights about the application and the behavior of its users.</p>
<p>This project was completed as part of the <a href="https://www.udemy.com/course/the-ultimate-mysql-bootcamp-go-from-sql-beginner-to-expert/">Ultimate MySQL Bootcamp</a> course by Colt Steele.</p>
<hr>
<h2 id="part-i-defining-the-database-schema">Part I: Defining the Database Schema</h2>
<p>The overall schema for the database is as follows:</p>
<p><a href="https://jgabunilas.github.io/images/db_schema.JPG"><img src="/projects/project-6-igclone/db_schema.JPG"></a></p>
<p>The individual tables were designed as follows:</p>
<h3 id="users">users</h3>
<p><img src="/projects/project-6-igclone/users.JPG"></p>
<p>The <code>users</code> table represents the users of the social media application and contains three columns:</p>
<ul>
<li><strong>id</strong>: a unique integer id for the user which also serves as a <em>primary key</em>. Additionally, the user id is a <em>foreign key</em> for many of the other tables.</li>
<li><strong>username</strong>: the username for the user. A username is required.</li>
<li><strong>created_at</strong>: a timestamp that indicates when the user was added to the database. Defaults to the current time</li>
</ul>
<h3 id="photos">photos</h3>
<p><img src="/projects/project-6-igclone/photos.JPG"></p>
<p>The <code>photos</code> table represents the photos that are posted to the application and contains four columns:</p>
<ul>
<li><strong>id</strong>: a unique integer id for the photo which also serve as a <em>primary key</em></li>
<li><strong>image_url</strong>: the URL where the image is located. A URL is required.</li>
<li><strong>user_id</strong>: the user to whom the photo belongs. This is a required field in order to avoid &ldquo;orphan photos&rdquo; with no owners. It is also a <em>foreign key</em> that references <code>users.id</code>, such that the owner must be an existing user of the application.</li>
<li><strong>created_at</strong>: a timestamp that indicates when the photo was added</li>
</ul>
<h3 id="comments">comments</h3>
<p><img src="/projects/project-6-igclone/comments.JPG"></p>
<p>The <code>comments</code> table tracks comments that users make on photos. It contains three columns:</p>
<ul>
<li><strong>id</strong>: a unique integer id for the comment</li>
<li><strong>comment_text</strong>: the textual content of the comment</li>
<li><strong>photo_id</strong>: the id of the photo for which the comment has been left. It is a <em>foreign key</em> that references <code>photos.id</code>.</li>
<li><strong>user_id</strong>: the id of the user who has left the comment. It is a <em>foreign key</em> that references <code>users.id</code>.</li>
<li><strong>created_at</strong>: a timestamp that indicates when the comment was created</li>
</ul>
<h3 id="likes">likes</h3>
<p><img src="/projects/project-6-igclone/likes.JPG"></p>
<p>The <code>likes</code> table tracks the likes that users give to photos. It contains three columns:</p>
<ul>
<li><strong>user_id</strong>: the id of the user who is giving the like. It is a <em>foreign key</em> that references <code>users.id</code>. It also forms a <em>composite key</em> with <strong>photo_id</strong>.</li>
<li><strong>photo_id</strong>: the id of the photo to which the like is given. It is a <em>foreign key</em> tha references <code>photos.id</code>. It also forms a <em>composite key</em> with <strong>user_id</strong>.</li>
<li><strong>created_at</strong>: a timestamp that indicates when the like was given</li>
</ul>
<h3 id="follows">follows</h3>
<p><img src="/projects/project-6-igclone/follows.JPG"></p>
<p>The <code>follows</code> table tracks which users are followed by other users on the social media application. It consists of three columns:</p>
<ul>
<li><strong>follower_id</strong>: the user id of the user who is following another user. It is a <em>foreign key</em> that references <code>users.id</code>. It also forms a <em>composite key</em> with <strong>followee_id</strong>.</li>
<li><strong>followee_id</strong> the user id of the user who is being followed. It is a <em>foreign key</em> that references <code>users.id</code>. It also forms a <em>composite key</em> with <strong>follower_id</strong>.</li>
<li><strong>created_at</strong>: a timestamp that indicates when the follower began following the followee</li>
</ul>
<p>If a user attempts to follow themselves, the following <em>database trigger</em> prevents them from doing so:</p>
<pre tabindex="0"><code>DELIMITER $$

CREATE TRIGGER prevent_self_follows
     BEFORE INSERT ON follows FOR EACH ROW
     BEGIN
         IF NEW.follower_id = NEW.followee_id
         THEN   
             SIGNAL SQLSTATE &#39;45000&#39;
                 SET MESSAGE_TEXT = &#34;You cannot follow yourself.&#34;;
         END IF;
     END;
$$

DELIMITER ;
</code></pre><h3 id="unfollows">unfollows</h3>
<p><img src="/projects/project-6-igclone/unfollows.JPG"></p>
<p>The <code>unfollows</code> table allows us to track when users decide to unfollow other users. It consists of three columns:</p>
<ul>
<li><strong>follower_id</strong>: the user id of the user who unfollows another user. It is a <em>foreign key</em> that references <code>users.id</code>. It also forms a <em>composite key</em> with <strong>followee_id</strong>.</li>
<li><strong>followee_id</strong> the user id of the user who is unfollowed by another user. It is a <em>foreign key</em> that references <code>users.id</code>. It also forms a <em>composite key</em> with <strong>follower_id</strong>.</li>
<li><strong>created_at</strong>: a timestamp that indicates when the follower stopped following the followee.</li>
</ul>
<p>When a row is deleted from the <code>follows</code> table (thereby indicating that an unfollow has occured), the following <em>database trigger</em> adds the deleted follower/followee pair to the <code>unfollows</code> table:</p>
<pre tabindex="0"><code>CREATE TRIGGER create_unfollow
    AFTER DELETE ON follows FOR EACH ROW 
BEGIN
    INSERT INTO unfollows
    SET follower_id = OLD.follower_id,
        followee_id = OLD.followee_id;
END$$
</code></pre><h3 id="tags">tags</h3>
<p><img src="/projects/project-6-igclone/tags.JPG"></p>
<p>The <code>tags</code> table catalogs the unique tags (commonly known as <em>hashtags</em> in popular social media applications) that are available for users to apply to photos. It consists of two columns:</p>
<ul>
<li><strong>id</strong>: the unique integer id of the tag. It is a <em>primary key</em>.</li>
<li><strong>tag_name</strong>: the textual name of the tag</li>
<li><strong>created_at</strong>: a timestemp that indicates when the tag was created</li>
</ul>
<h3 id="photo_tags">photo_tags</h3>
<p><img src="/projects/project-6-igclone/photo_tags.JPG"></p>
<p>The <code>photo_tags</code> table tracks which tags have been applied to which photos in the <code>photos</code> table. In this way, the <code>photo_tags</code> table relates to the tags to the photos. It consists of two columns:</p>
<ul>
<li><strong>photo_id</strong>: the id of the photo to which the tag has been applied. It is a <em>foreign key</em> that references <code>photos.id</code>. It also forms a <em>composite key</em> with <strong>tag_id</strong>.</li>
<li><strong>tag_id</strong>: the id of the tag that has been applied to the photo. It is a <em>foreign key</em> that references <code>tags.id</code>. It also forms a <em>composite key</em> with <strong>photo_id</strong>.</li>
</ul>
<hr>
<h2 id="part-2-populating-the-database">Part 2: Populating the Database</h2>
<p>The database tables are next populated with a large set of fictional data representing users, photos, comments, likes, and so forth. The data can be viewed <a href="https://github.com/jgabunilas/mysql_bootcamp/blob/main/Section%2014-15%20-%20Instagram%20Database%20Clone/ig_clone_data.sql">here</a>.</p>
<hr>
<h2 id="part-3-insights">Part 3: Insights</h2>
<p>The relational database is now populated and can be explored to develop new insights about the users and contents of the application.</p>
<h4 id="longest-tenured-users">Longest-tenured users</h4>
<p>To determine the users who have been using the application the longest, we need only explore the <code>users</code> table.
<img src="/projects/project-6-igclone/longest-users.JPG"></p>
<h4 id="choosing-a-day-to-air-advertisements-to-new-users">Choosing a day to air advertisements to new users</h4>
<p>Suppose our goal is to launch a new advertising campaign that will reach the greatest number of <em>new</em> users, but due to bandwidth issues we can only advertise one day per week. We are therefore interested in determining the day(s) on which new users sign up most frequently. Again, all of the necessary data is contained with the <code>users</code> table, where we can use series of string commands to count how many times a new registration timestamp was created on each day of the week.</p>
<p><img src="/projects/project-6-igclone/registration-day.JPG"></p>
<p>The data suggests that an ad will be seen by most new users on a Thursday or a Sunday.</p>
<h4 id="find-users-who-have-never-posted-a-photo">Find users who have never posted a photo</h4>
<p>We next want to send out an engagement email out to users who have registered for the application, but have never posted a photo. For this exercise we work with the <code>users</code> and <code>photos</code> tables. With the following table join, we can determine which users have no photos associated with their accounts</p>
<p><img src="/projects/project-6-igclone/no-photos.JPG"></p>
<h4 id="finding-the-most-popular-photo">Finding the most popular photo</h4>
<p>Social media is all about popularity and getting as many <em>likes</em> as possible. To find which photo is the most popular, we perform a join on the <code>users</code>, <code>photos</code>, and <code>likes</code> tables. First, we join <code>users</code> and <code>photos</code> by the user id (many users will have more than one photo). Next, the <code>likes</code> table is joined to the combined <code>users</code>-<code>photos</code> table by photo id. Since photos can have more than one like, the resulting table will have duplicate rows for photos that received multiple likes. To count the likes, we group the replicates by <strong>username</strong> and <strong>photo_id</strong>, then perform a count on the groupings. By sorting and limiting the output, we determine the most popular photo, its owner, and how many likes it has received.</p>
<p><img src="/projects/project-6-igclone/popular-photo.JPG"></p>
<h4 id="calculating-how-many-photos-the-average-user-posts">Calculating how many photos the average user posts</h4>
<p>Since this is photo-based social media application, we want to know how many photos our users are uploading, on average. We have enforced that all users and photos must be unique, and so we can calculate this by simply dividing the total number of photos by the total number of users.</p>
<p><img src="/projects/project-6-igclone/average-photos.JPG"></p>
<h4 id="determining-the-most-commonly-used-hashtags">Determining the most commonly-used hashtags</h4>
<p>Hashtags can be annoying, but they serve a purpose. In our fictional application, we&rsquo;re interested in which of the tags our users are utilizing the most. We start by joining the <code>photo_tags</code> table with the <code>tags</code> table on the tag id. Because the same tag can be used for multiple photos, we next perform a <code>GROUP BY</code> on the <strong>tag_id</strong> and count the number of times each tag id occurs in the joined table (aliasing the sum as <strong>frequency</strong>). We can sort the results in descending order and limit the output to the tags with the highest counts. The final selection involves only the tag names and the number of occurrences of those tags.</p>
<p><img src="/projects/project-6-igclone/popular-tags.JPG"></p>
<h4 id="rooting-out-bots">Rooting out bots</h4>
<p>Bots are unwelcome on social media applications, including ours. We therefore seek to root out bots by determine the users who have <em>liked every single photo within the application</em>. To find said bots, we need to make use of a few key pieces of information:</p>
<ul>
<li>The total number of photos in our database, which in our case is 257 photos.</li>
<li>The fact that a user can only like each photo at most one time
Thus, bot users (or perhaps real users who genuinely enjoy making people happy) will be those who have given the same number of <em>likes</em> as there are photos.</li>
</ul>
<p>The query itself is fairly simple. We join the <code>likes</code> and <code>users</code> table by user id, then gorup by <strong>user_id</strong> and count the number of times each user appears in the joined table. The users who have give the highest number of likes, equal to the number of photos in the database, are likely to be bots.</p>
<p><img src="/projects/project-6-igclone/bots1.JPG"></p>
<p>Instead of counting and sorting for the users giving out the most likes, an alternative approach is to directly count the number of photos and then using the <code>HAVING</code> function to select users who have given a number of likes equal to the number of total photos.</p>
<p><img src="/projects/project-6-igclone/bots2.JPG"></p><ul class="pa0">
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="http://localhost:1313/" >
    &copy;  Jason Gabunilas 2024 
  </a>
    <div><div class="ananke-socials"></div>
</div>
  </div>
</footer>

  </body>
</html>
